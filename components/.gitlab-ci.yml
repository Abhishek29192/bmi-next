image: node:12

test_components:
  stage: test
  rules:
    - if: "$CI_PIPELINE_SOURCE == 'merge_request_event' || ($CI_PIPELINE_SOURCE == 'push' && $CI_COMMIT_BRANCH == 'master')"
      changes:
        - components/**/*
        - jest/**/*
  needs: [install]
  before_script:
    - yarn config set cache-folder ~/.yarn
  script:
    - yarn coverage:components
