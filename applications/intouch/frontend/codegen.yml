overwrite: true
# Endpoint API
schema:
  - http://localhost:4000/graphql:
      headers:
        Authorization: "Bearer ${AUTH0_ACCESS_TOKEN}"
# Format files
hooks:
  afterAllFileWrite:
    - prettier --write
# documents: Array of paths or glob patterns for files which export GraphQL documents using a gql tag or a plain string;
documents:
  - "./**/*.(ts|tsx|graphql)"
  - "!./graphql/generated/*"
generates:
  # Create operations based on queries
  ./graphql/generated/operations.ts:
    preset: import-types
    presetConfig:
      typesPath: "@bmi/intouch-api-types"
      importTypesNamespace: SchemaTypes
    plugins:
      - typescript-operations
    config:
      immutableTypes: true
      useTypeImports: true

  # Create react-apollo hooks
  ./graphql/generated/hooks.ts:
    preset: import-types
    presetConfig:
      typesPath: ./operations
      importTypesNamespace: OperationTypes
    plugins:
      - typescript-react-apollo

  # Create next-ssr
  ./graphql/generated/page.tsx:
    config:
      reactApolloVersion: 3
      withHooks: true
      withHOC: false
    preset: import-types
    presetConfig:
      typesPath: ./operations
      importTypesNamespace: OperationTypes
    plugins:
      - graphql-codegen-apollo-next-ssr
