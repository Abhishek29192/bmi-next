# get the list of guarantee types
query {
  guaranteeTypeCollection {
    items {
      sys {
        id
      }
      technology
      coverage
    }
  }
}

# pick one of the id's and use it for the next query
# replace the id with an actual id `guaranteeType(id: "RkS8ufpDvSSjRu97p6LVg")`
# fragment contentfulMeta on ContentfulMetadata {
#   tags {
#     id
#     name
#   }
# }
# fragment sysData on Sys {
#   id
#   spaceId
#   environmentId
# }
fragment assetData on Asset {
  # sys {
  #   ...sysData
  # }
  # contentfulMetadata {
  #   ...contentfulMeta
  # }
  title
  description
  contentType
  fileName
  url
}
fragment messageData on MessageTemplate {
  sys {
    ...sysData
  }
  contentfulMetadata {
    ...contentfulMeta
  }
  event
  format
  subject
  notificationBody
  emailBody
}

query {
  guaranteeType(id: "RkS8ufpDvSSjRu97p6LVg") {
    sys {
      ...sysData
    }
    contentfulMetadata {
      ...contentfulMeta
    }
    name
    displayName
    technology
    coverage
    name
    signature {
      ...assetData
    }
    guaranteeTemplatesCollection(limit: 5) {
      items {
        sys {
          ...sysData
        }
        logo {
          ...assetData
        }
        contentfulMetadata {
          ...contentfulMeta
        }
        displayName
        approvalMessage {
          ...messageData
        }
        rejectionMessage {
          ...messageData
        }
        logo {
          ...assetData
        }
        signatory
        headingGuarantee
        headingScope
        headingProducts
        headingBeneficiary
        headingBuildingOwnerName
        headingBuildingAddress
        headingRoofArea
        headingRoofType
        headingContractor
        headingContractorName
        headingContractorId
        headingStartDate
        headingGuaranteeId
        headingValidity
        headingExpiry
        footer
        maintenanceTemplate {
          ...assetData
        }
        guaranteeScope
        terms {
          ...assetData
        }
        mailBody
        filenamePrefix
        lockupLine1
        lockupLine2
        roofType
      }
      total
      skip
      limit
    }
  }
}
