### Template for public HTTP functions ###

steps:
  - name: "gcr.io/cloud-builders/gcloud"
    args:
      - functions
      - deploy
      - pubsub-cron-certification
      - --source=gs://${_GCP_INTOUCH_REPLATFORM_BUILD_STORAGE}/gcp-cron-certification.zip
      - --runtime=nodejs14
      - --entry-point=updateCertificates
      - --region=europe-west2
      - --trigger-topic=cron-certification
      - --set-env-vars=DOCEBO_API_URL=${_INTOUCH_DOCEBO_API_URL},DOCEBO_API_CLIENT_ID=${_INTOUCH_DOCEBO_API_CLIENT_ID},DOCEBO_API_CLIENT_SECRET=${_INTOUCH_DOCEBO_API_CLIENT_SECRET},DOCEBO_API_USERNAME=${_INTOUCH_DOCEBO_API_USERNAME},DOCEBO_API_PASSWORD=${_INTOUCH_DOCEBO_API_PASSWORD},GCP_SECRET_PROJECT=${_GCP_SECRET_PROJECT}
